<div class="container mt-3">
  <form action="/reports/{{rp._id}}/edit" method="post" enctype="multipart/form-data">
    <legend>Insert Map</legend>
    <div class="mb-3">
      <label for="disabledTextInput" class="form-label">Report Type: </label>
      <input type="text" id="disabledTextInput" class="form-control" name="reportType" placeholder="Name Map"
        value="{{rp.reportType}}" />
    </div>
    <div class="mb-3">
      <label for="disabledTextInput" class="form-label">Address: </label>
      <input type="text" id="disabledTextInput" class="form-control" name="address" placeholder="Information"
        value="{{rp.address}}" />
    </div>
    <div class="mb-3">
      <label for="disabledTextInput" class="form-label">Describe: </label>
      <input type="text" id="disabledTextInput" class="form-control" name="describe" placeholder="Information"
        value="{{rp.describe}}" />
    </div>
    <div class="mb-3">
      <label for="disabledTextInput" class="form-label">Evaluate: </label>
      <input type="text" id="disabledTextInput" class="form-control" name="evaluate" placeholder="Information"
        value="{{rp.evaluate}}" />
    </div>
    <div class="mb-3">
      <label for="disabledTextInput" class="form-label">Timestamp: </label>
      <input type="text" id="disabledTextInput" class="form-control" name="timeStamp" placeholder="Information"
        value="{{rp.timeStamp}}" />
    </div>
    <div class="mb-3">
      <label for="disabledTextInput" class="form-label">TimeDone: </label>
      <input type="text" id="disabledTextInput" class="form-control" name="timeDone" placeholder="Information"
        value="{{rp.timeDone}}" />
    </div>

    <div class="mb-3">
      <label for="disabledTextInput" class="form-label">Note: </label>
      <input type="text" id="disabledTextInput" class="form-control" name="note" placeholder="Information"
        value="{{rp.note}}" />
    </div>
    <div class="mb-3">
      <label for="disabledTextInput" class="form-label">Status: </label>
      <input type="text" id="disabledTextInput" class="form-control" name="status" placeholder="Information"
        value="{{rp.status}}" />
    </div>
    <div class="mb-3">
      <label for="formFileSm" class="form-label">Images: </label>
      <input type="file" name="images" id="images" multiple />
    </div>
    <div class="mb-3">
      <div id="image-preview">
        <p>Existing Images:</p>
        {{#each rp.image}}
        <img src="/images/{{this}}" width="150" height="150" />
        {{/each}}
      </div>
    </div>
    <input type="hidden" name="existingImages" id="existing-images" value="{{rp.image}}">

    <button type="submit" class="btn btn-outline-success">Submit</button>
  </form>
</div>


<script>
  const imagePreview = document.getElementById('image-preview');
  const existingImagesInput = document.getElementById('existing-images');
  const imagesInput = document.getElementById('images');

  // Hiển thị hình ảnh đã chọn
  imagesInput.addEventListener('change', function (event) {
    imagePreview.innerHTML = '';
    for (const file of event.target.files) {
      const img = document.createElement('img');
      img.src = URL.createObjectURL(file);
      img.width = 150;
      img.height = 150;
      imagePreview.appendChild(img);
    }
  });

  // Xử lý xóa hình ảnh đã chọn
  imagePreview.addEventListener('click', function (event) {
    if (event.target.tagName === 'IMG') {
      event.target.remove();
    }
  });

</script>